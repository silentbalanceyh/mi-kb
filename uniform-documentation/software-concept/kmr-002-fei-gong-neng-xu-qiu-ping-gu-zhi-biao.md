# 非功能需求评估指标

## 1.指标概念

### 主要指标

* **高性能**：运行效率高、性价比高
* **可用性**：持续可用性、缩短宕机时间、出错恢复、可靠性
* **可伸缩性**：垂直伸缩、水平伸缩
* **可扩展性**：可插拔、组件重用
* **安全性**：数据安全、加密、熔断、防攻击

### 其他指标

* **可监控性**：快速发现、定位和解决
* **可测试性**：可灰度、可预览、可Mock、可拆解
* **鲁棒性**：容错性、可恢复性
* **可维护性**：易于维护、监控、运行和扩展
* **可重用性**：可移植性、解耦
* **易用性**：可操作性

## 2.具体评估指标

### 2.1.应用服务器

#### 部署结构

1. 负载均衡策略
2. 高可用策略
3. I/O模型（NIO/BIO）
4. 线程池模型
5. 线程池中的线程数量
6. 是否多业务混合部署

#### 容量和性能

1. 每天的请求量
2. 各接口的访问峰值
3. 平均的请求响应时间
4. 最大的请求响应时间
5. 在线的用户量
6. 请求的大小
7. 网卡的I/O流量
8. 磁盘的I/O流量
9. 内存的使用情况
10. CPU的使用情况

#### 其他指标

1. 请求的内容是否包含大对象
2. GC收集器的选型和配置

### 2.2.数据库

#### 部署结构

1. 复制模型
2. 失效转移策略
3. 容灾策略
4. 归档策略
5. 读写分离策略
6. 分库分表（分片）策略
7. 静态数据和半静态数据是否使用缓存
8. 有没有考虑缓存穿透并压垮数据库的情况
9. 缓存失效和缓存数据预热策略

#### 容量和性能

1. 当前的数据容量
2. 每天的数据增量（预估容量）
3. 每秒的读峰值
4. 每秒的写峰值
5. 每秒的事务量峰值

#### 其他指标

1. 查询是否走索引
2. 有没有大数据量的查询和范围查询
3. 有没有多表关联，关联是否用到索引
4. 有没有使用悲观锁，是否可以改造成乐观锁，是否可以利用数据库内置行级锁
5. 事务和一致性级别
6. 使用的JDBC数据源类型及连接数等配置
7. 是否开启JDBC诊断日志
8. 有没有存储过程
9. 伸缩策略（分区表、自然时间分表、水平分库分表）
10. 水平分库分表实现方法（客户端、代理、NoSQL）

### 2.3.缓存

#### 部署结构

1. 复制模型
2. 失效转移
3. 持久策略
4. 淘汰策略
5. 线程模型
6. 预热方法
7. 哈希分片策略

#### 容量和性能

1. 缓存内容的大小
2. 缓存内容的数量
3. 缓存内容的过期时间
4. 缓存的数据结构
5. 每秒的读峰值
6. 每秒的写峰值

#### 其他指标

1. 冷热数据比例
2. 是否有可能发生缓存穿透
3. 是否有大对象
4. 是否使用缓存实现分布式锁
5. 是否使用缓存支持的脚本（Lua）
6. 是否避免了Race Condition
7. 缓存分片方法（客户端、代理、集群）

### 2.4.消息队列

#### 部署结构

1. 复制模型
2. 失效转移
3. 持久策略

#### 容量与性能

1. 每天平均的数据增量
2. 消息持久的过期时间
3. 每秒的读峰值
4. 每秒的写峰值
5. 每条消息的大小
6. 平均延迟
7. 最大延迟

#### 其他指标

1. 消费者线程池模型
2. 哈希分片策略
3. 消息的可靠投递
4. 消费者的处理流程和持久机制



